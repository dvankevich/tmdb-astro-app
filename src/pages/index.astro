---
import Layout from "../layouts/Layout.astro";

const key = import.meta.env.TMDB_API_KEY;
const res = await fetch(
    `https://api.themoviedb.org/3/movie/popular?api_key=${key}&language=uk-UA&page=1`,
);
const { results: movies } = await res.json();
---

<Layout title="Популярні фільми">
    <h1 class="text-4xl font-bold text-center py-12">Популярні фільми</h1>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 px-4">
        {
            movies.map((m: any) => (
                <div class="bg-zinc-800 rounded-xl overflow-hidden">
                    <img
                        src={`https://image.tmdb.org/t/p/w500${m.poster_path}`}
                        alt={m.title}
                        class="w-full"
                    />
                    <div class="p-4">
                        <h3 class="font-bold">{m.title}</h3>
                        <p class="text-sm text-gray-400">{m.release_date}</p>
                    </div>
                </div>
            ))
        }
    </div>
</Layout>
